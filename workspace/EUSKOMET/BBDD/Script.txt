-- --------------------------------------------------------
-- Host:                         127.0.0.1
-- Versión del servidor:         10.5.6-MariaDB - mariadb.org binary distribution
-- SO del servidor:              Win64
-- HeidiSQL Versión:             11.0.0.5919
-- --------------------------------------------------------

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET NAMES utf8 */;
/*!50503 SET NAMES utf8mb4 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;


-- Volcando estructura de base de datos para euskomet
CREATE DATABASE IF NOT EXISTS `euskomet` /*!40100 DEFAULT CHARACTER SET latin1 */;
USE `euskomet`;

-- Volcando estructura para tabla euskomet.espacios_naturales
CREATE TABLE IF NOT EXISTS `espacios_naturales` (
  `cod_esp_natural` int(3) NOT NULL AUTO_INCREMENT,
  `nombre` varchar(20) NOT NULL,
  `tipo` varchar(20) NOT NULL,
  `latitud` double NOT NULL,
  `longitud` double NOT NULL,
  `cod_mun` int(3) NOT NULL,
  PRIMARY KEY (`cod_esp_natural`),
  KEY `FK_ESP_NAT_MUN` (`cod_mun`),
  CONSTRAINT `FK_ESP_NAT_MUN` FOREIGN KEY (`cod_mun`) REFERENCES `municipios` (`cod_mun`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- La exportación de datos fue deseleccionada.

-- Volcando estructura para tabla euskomet.estaciones
CREATE TABLE IF NOT EXISTS `estaciones` (
  `cod_est` int(3) NOT NULL AUTO_INCREMENT,
  `nombre` varchar(20) NOT NULL,
  `pueblo` varchar(20) NOT NULL,
  `latitud` double NOT NULL,
  `longitud` double NOT NULL,
  `ICA_estacion` varchar(30) NOT NULL,
  `cod_mun` int(3) NOT NULL,
  PRIMARY KEY (`cod_est`),
  KEY `FK_EST_MUN` (`cod_mun`),
  CONSTRAINT `FK_EST_MUN` FOREIGN KEY (`cod_mun`) REFERENCES `municipios` (`cod_mun`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- La exportación de datos fue deseleccionada.

-- Volcando estructura para tabla euskomet.favoritos_esp
CREATE TABLE IF NOT EXISTS `favoritos_esp` (
  `cod_esp_natural` int(3) NOT NULL,
  `cod_user` int(3) NOT NULL,
  PRIMARY KEY (`cod_esp_natural`,`cod_user`),
  KEY `FK_FAV_USER_ESP` (`cod_user`),
  KEY `FK_COD_NAT` (`cod_esp_natural`),
  CONSTRAINT `FK_FAV_EST_ESP` FOREIGN KEY (`cod_esp_natural`) REFERENCES `espacios_naturales` (`cod_esp_natural`),
  CONSTRAINT `FK_FAV_USER_ESP` FOREIGN KEY (`cod_user`) REFERENCES `usuarios` (`cod_user`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- La exportación de datos fue deseleccionada.

-- Volcando estructura para tabla euskomet.favoritos_est
CREATE TABLE IF NOT EXISTS `favoritos_est` (
  `cod_est` int(3) NOT NULL,
  `cod_user` int(3) NOT NULL,
  PRIMARY KEY (`cod_est`,`cod_user`),
  KEY `FK_FAV_USER_EST` (`cod_user`),
  KEY `FK_COD_EST` (`cod_est`),
  CONSTRAINT `FK_FAV_EST` FOREIGN KEY (`cod_est`) REFERENCES `estaciones` (`cod_est`),
  CONSTRAINT `FK_FAV_USER_EST` FOREIGN KEY (`cod_user`) REFERENCES `usuarios` (`cod_user`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- La exportación de datos fue deseleccionada.

-- Volcando estructura para tabla euskomet.fotos_esp_naturales
CREATE TABLE IF NOT EXISTS `fotos_esp_naturales` (
  `cod_foto` int(3) NOT NULL,
  `cod_esp_natural` int(3) NOT NULL,
  `archivo` varchar(30) NOT NULL,
  PRIMARY KEY (`cod_foto`),
  KEY `FK_FOTO_ESP_NAT` (`cod_esp_natural`),
  CONSTRAINT `FK_FOTO_ESP_NAT` FOREIGN KEY (`cod_esp_natural`) REFERENCES `espacios_naturales` (`cod_esp_natural`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- La exportación de datos fue deseleccionada.

-- Volcando estructura para tabla euskomet.fotos_estaciones
CREATE TABLE IF NOT EXISTS `fotos_estaciones` (
  `cod_foto` int(3) NOT NULL,
  `cod_est` int(3) NOT NULL,
  `archivo` varchar(30) NOT NULL,
  PRIMARY KEY (`cod_foto`),
  KEY `FK_FOTO_EST` (`cod_est`),
  CONSTRAINT `FK_FOTO_EST` FOREIGN KEY (`cod_est`) REFERENCES `estaciones` (`cod_est`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- La exportación de datos fue deseleccionada.

-- Volcando estructura para tabla euskomet.municipios
CREATE TABLE IF NOT EXISTS `municipios` (
  `cod_mun` int(3) NOT NULL AUTO_INCREMENT,
  `nombre` varchar(20) NOT NULL,
  `cod_prov` int(3) NOT NULL,
  PRIMARY KEY (`cod_mun`),
  KEY `FK_MUN_PROV` (`cod_prov`),
  CONSTRAINT `FK_MUN_PROV` FOREIGN KEY (`cod_prov`) REFERENCES `provincias` (`cod_prov`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- La exportación de datos fue deseleccionada.

-- Volcando estructura para tabla euskomet.mun_esp_na
CREATE TABLE IF NOT EXISTS `mun_esp_na` (
  `cod_mun` int(3) NOT NULL,
  `cod_esp_natural` int(3) NOT NULL,
  PRIMARY KEY (`cod_mun`,`cod_esp_natural`),
  KEY `FK_COD_ESP_NA` (`cod_esp_natural`),
  KEY `FK_COD_MUN` (`cod_mun`),
  CONSTRAINT `FK_COD_ESP_NA` FOREIGN KEY (`cod_esp_natural`) REFERENCES `espacios_naturales` (`cod_esp_natural`),
  CONSTRAINT `FK_MUN_ESP_NA` FOREIGN KEY (`cod_mun`) REFERENCES `municipios` (`cod_mun`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- La exportación de datos fue deseleccionada.

-- Volcando estructura para tabla euskomet.provincias
CREATE TABLE IF NOT EXISTS `provincias` (
  `cod_prov` int(3) NOT NULL AUTO_INCREMENT,
  `nombre` varchar(20) NOT NULL,
  PRIMARY KEY (`cod_prov`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- La exportación de datos fue deseleccionada.

-- Volcando estructura para tabla euskomet.usuarios
CREATE TABLE IF NOT EXISTS `usuarios` (
  `cod_user` int(3) NOT NULL AUTO_INCREMENT,
  `nombre` varchar(20) NOT NULL,
  `contraseña` varchar(20) NOT NULL,
  `pregunta` varchar(20) NOT NULL,
  `respuesta` varchar(30) NOT NULL,
  PRIMARY KEY (`cod_user`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=latin1;

-- La exportación de datos fue deseleccionada.

/*!40101 SET SQL_MODE=IFNULL(@OLD_SQL_MODE, '') */;
/*!40014 SET FOREIGN_KEY_CHECKS=IF(@OLD_FOREIGN_KEY_CHECKS IS NULL, 1, @OLD_FOREIGN_KEY_CHECKS) */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;


insert into usuarios values (01,'Markel','1234','¿Dónde naciste?','bilbo');

insert into provincias values (01,'Bizkaia');
insert into provincias values (02,'Gipuzkoa');
insert into provincias values (03,'Araba');

insert into municipios values (01,'Amorebieta',01);
insert into municipios values (02,'Gernika',01); 
insert into municipios values (03,'Sestao',01); 

insert into municipios values (04,'Zarautz',02); 
insert into municipios values (05,'Zumaia',02); 
insert into municipios values (06,'Donosti',02);

insert into municipios values (07,'Gasteiz',03); 
insert into municipios values (08,'Laguardia',03); 
insert into municipios values (09,'Labastida',03);  


insert into espacios_naturales values (01,'Belatxikieta','montaña','43.2204692','-2.733068',01);

insert into espacios_naturales values (02,'Laga','playa','43.4167','-2.66667',02);

insert into espacios_naturales values (03,'Ullíbarri-Gamboa','pantano','42.916039866686','-2.628371968787',07);

insert into espacios_naturales values (04,'Playa de Zarautz','playa','43.2804','-2.17159',07);
